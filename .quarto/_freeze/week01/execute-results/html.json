{
  "hash": "3bf60b377953140cffee41cbfa8589d6",
  "result": {
    "markdown": "---\ntitle: \"Introduction to the Course\"\n---\n\n\nThis is a Quarto document. It has three parts: a header, some text written in markdown, and some chunks of R code.\n\nThe header of the document contains key-value pairs that are acted upon when the document is rendered to html using the render button. The header is written in a markup language called YAML. YAML cares about indentation, so you need to indent certain items consistently for them to be understood by the renderer.\n\nThe main body of the document is text written in Markdown. Markdown was originally written as a kind of shorthand for html so that instead of long html tags, you would use short Markdown tags. For example, this section is called *Intro* and at the top of it there is a blank line followed by a hashtag followed by the word *Intro*. You could instead use the html tag `<h1>Intro</h1>` but it is shorter to write `# Intro`. For a second level heading you use two hashtags. Keep in mind that you can mix html and Markdown in a Markdown file.\n\nThe third part of the document is chunks of R code. These start with a blank line followed by three backticks, followed by the letter *r* in curly braces. It looks like this:\n\n````markdown\n```{{r}}\n1 + 1\n```\n````\n\nBear in mind that a backtick is not the same thing as an apostrophe. On your keyboard it is usually on the same key as the tilde.\n\nBy default, when you render the document, the code in chunks is executed and the result is displayed in the html version of the document.\n\n## Introducing R and RStudio\nFirst we introduce R and RStudio and, finally, Quarto. First, either use the RStudio server at\n[https://rstudio.ischool.utexas.edu](https://rstudio.ischool.utexas.edu) or\ninstall R and RStudio, in that order. Some people have trouble installing, especially Windows or Mac. Some Mac users were opening the `.dmg` file for RStudio as a readonly volume, then open the app on that volume. Instead, you have to drag the RStudio icon to the Applications folder and open it from there. The telltale sign of this problem is that you can't save any files. Windows users have a different problem. Some Windows users try to install RStudio and R on OneDrive. RStudio won't run from OneDrive and some Windows users can't tell the difference between installing on a local hard drive and installing in the cloud on OneDrive.\n\n## Console\nThe first thing we can try (after installing if you chose to have it on your machine) is to use the console. By default, that is in the lower left of the RStudio window (you can move everything around, though) and it has a command prompt that looks like `>`. There enter the following function to verify that you can download R packages, which are collections of functions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(MASS)\n```\n:::\n\n\nIf this works, you won't get any output from the `library()` function but the command prompt will reappear. That function loads the package from the library into our environment so we can use it in the current session. If you screw around with RStudio and particularly if you follow a lot of hints on Stack Overflow, you may end up with several libraries of packages, all out of sync with each other. If you have trouble loading packages from the library, you may want to call the following function to see how many libraries are on your computer and where they are. This function will return the list of library folders on the server if you call it there.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n.libPaths()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"/Users/mcq/Library/R/x86_64/4.3/library\"                              \n[2] \"/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library\"\n```\n:::\n:::\n\n\nThis function returns a list of folders containing libraries, one library per folder. You can then use the terminal or a file explorer outside of R to delete some duplicate packages. The important library for this class is `/opt/R/4.3.1/lib/R/library`. Only I can install packages there. If you need a package that is not installed, it is best to ask me to install it there. You also probably have a personal library where you can install packages, but on this machine, it is better not to do so.\n\nAfter loading the relative small package known as `MASS`, go on to install a package that is actually a large set of packages, collectively known as the Tidyverse. This is a set of packages we will use in our homework.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n✖ dplyr::select() masks MASS::select()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n:::\n\n\nThis takes a while because there are so many packages involved.\n\n## The `mtcars` data set\nThere is a lot of data built into R by default. We look at one such data set, called `mtcars`. Run a function that looks at the first few lines of the data set, `head(mtcars)`, then checked the help screen for the data set, saying `help(mtcars)`, then produce a linear model of the `mpg` column being predicted by the `disp` column, saying `summary(lm(mpg~disp,data=mtcars))`. This linear model is the heart of regression analysis and one of the main things we'll learn in this course is how to read the summary.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(mtcars)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                   mpg cyl disp  hp drat    wt  qsec vs am gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\nValiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n```\n:::\n\n```{.r .cell-code}\nhelp(mtcars)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nstarting httpd help server ... done\n```\n:::\n:::\n\n\nDescriptive statistics deals with numerical analysis of data, such as finding the mean, median etc of values in the dataset. We will find mean, median and mode using the weight column in `mtcars` with the functions `mean()` and `median()`. R doesn't have a built-in function for mode so we calculate it explicitly. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_wt <- mean(mtcars$wt)\nprint(paste0(\"Mean = \", mean_wt))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Mean = 3.21725\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmedian_wt <- median(mtcars$wt)\nprint(paste0(\"Median = \", median_wt))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Median = 3.325\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmode_wt <- as.numeric(names(sort(table(mtcars$wt), decreasing = TRUE)[1]))\nprint(paste0(\"Mode = \", mode_wt))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Mode = 3.44\"\n```\n:::\n:::\n\n\nHistograms show distribution of data. Let's create a histogram using the data in `mtcars`. First load the dataset using data(mtcars). Then we use the hist() function in R to create a histogram for the `mpg` variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(mtcars)\nhist(mtcars$mpg, main = \"Miles per Gallon Distribution\", xlab = \"Miles per Gallon\", ylab = \"Frequency\")\n```\n\n::: {.cell-output-display}\n![](week01_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nThen we calculate the range of miles per gallon from the histogram using the `range()` function. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmpg_range <- range(mtcars$mpg)\nmpg_range\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 10.4 33.9\n```\n:::\n:::\n\n\nNow, we will produce a linear model of the `mpg` column being predicted by the `disp` column, saying `summary(lm(mpg~disp,data=mtcars))`. This linear model is the heart of regression analysis and one of the main things we'll learn in this course is how to read the summary.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(mpg~disp,data=mtcars))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = mpg ~ disp, data = mtcars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-4.8922 -2.2022 -0.9631  1.6272  7.2305 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 29.599855   1.229720  24.070  < 2e-16 ***\ndisp        -0.041215   0.004712  -8.747 9.38e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.251 on 30 degrees of freedom\nMultiple R-squared:  0.7183,\tAdjusted R-squared:  0.709 \nF-statistic: 76.51 on 1 and 30 DF,  p-value: 9.38e-10\n```\n:::\n:::\n\n\n## Textbook data sets\nOur textbook, *Openintro Stats*, contains references to a lot of data sets, many of which I've downloaded and put into the folder `/home/mm223266/data/`. You can just use them from this location or go to the URL [https://openintro.org/data](https://openintro.org/data), but if you can't remember that, you can just google *openintro stats* and navigate to the data sets. Look at the metadata for the `loan50` data set, which is used in Chapter 1 of the textbook. You can download it in four different formats, the best of which is the `.rda` file or *R Data* file. It's the best because it preserves the data types, in this case dbl, int, and fctr. If we instead import the .csv file, we have to then specify the data types in R, which is an extra step we'd like to avoid when possible.\n\nWhen we download a file, R doesn't know where it is automatically. We do one of three things.\n\n- Change R to address the folder where we downloaded it\n- Move it to the folder R is currently addressing\n- [Keep R addressing your homework folder, but reach out for the data sets where I've downloaded them (only works if you're using the RStudio Server).]{.weekn}\n\nHow you do this depends on the operating system but, in any operating system we use the following three functions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"/Users/mcq/courses/stats/i306studyGuide\"\n```\n:::\n\n```{.r .cell-code}\n# setwd(\"/home/mm223266/i306/\")\nload(paste0(Sys.getenv(\"STATS_DATA_DIR\"),\"/loan50.rda\"))\n```\n:::\n\n\nThe first function tells us which folder (or directory if you prefer) R is addressing. The second one changes to the folder / directory we would like to use. (I've commented it out for this study guide.) The third one addresses the data where I've put it but leaves your working directory where it is. This is very convenient because it means that (1) you don't have to download data sets, and (2) I don't have to modify your homework file in order to check it.\n\nMy suggestion is that you create a folder for this class and use the third option. You can make your folder your default in RStudio, using Tools > Global Options > General > Default working directory.\n\nOnce we load `loan50.rda`, look at it and try to predict `total_credit_limit` using `annual_income`. Keep in mind that, if the file is in the current working directory / folder, R will autocomplete its name when you say `lo` and then press the tab key (assuming there are no other files starting with the letters lo in the same folder). You just have to enter enough letters to make the name unique before you press the tab key. If nothing happens when you press the tab key, you are either in the wrong folder or you have other files starting with the same letters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(loan50)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  state emp_length term homeownership annual_income verified_income\n1    NJ          3   60          rent         59000    Not Verified\n2    CA         10   36          rent         60000    Not Verified\n3    SC         NA   36      mortgage         75000        Verified\n4    CA          0   36          rent         75000    Not Verified\n5    OH          4   60      mortgage        254000    Not Verified\n6    IN          6   36      mortgage         67000 Source Verified\n  debt_to_income total_credit_limit total_credit_utilized\n1      0.5575254              95131                 32894\n2      1.3056833              51929                 78341\n3      1.0562800             301373                 79221\n4      0.5743467              59890                 43076\n5      0.2381496             422619                 60490\n6      1.0770448             349825                 72162\n  num_cc_carrying_balance       loan_purpose loan_amount grade interest_rate\n1                       8 debt_consolidation       22000     B         10.90\n2                       2        credit_card        6000     B          9.92\n3                      14 debt_consolidation       25000     E         26.30\n4                      10        credit_card        6000     B          9.92\n5                       2   home_improvement       25000     B          9.43\n6                       4   home_improvement        6400     B          9.92\n  public_record_bankrupt loan_status has_second_income total_income\n1                      0     Current             FALSE        59000\n2                      1     Current             FALSE        60000\n3                      0     Current             FALSE        75000\n4                      0     Current             FALSE        75000\n5                      0     Current             FALSE       254000\n6                      0     Current             FALSE        67000\n```\n:::\n\n```{.r .cell-code}\nsummary(lm(total_credit_limit~annual_income,data=loan50))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = total_credit_limit ~ annual_income, data = loan50)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-303384  -91959  -38226   89869  239503 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)   3.649e+04  3.156e+04   1.156    0.253    \nannual_income 1.997e+00  3.055e-01   6.535  3.8e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 123100 on 48 degrees of freedom\nMultiple R-squared:  0.4708,\tAdjusted R-squared:  0.4598 \nF-statistic: 42.71 on 1 and 48 DF,  p-value: 3.796e-08\n```\n:::\n:::\n\n\n## The `migraine` data set\nNext we load the `migraine.rda` file from the same place as above and reproduce a figure from the textbook by using the `table()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload(paste0(Sys.getenv(\"STATS_DATA_DIR\"),\"/migraine.rda\"))\nhead(migraine)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 2\n  group     pain_free\n  <fct>     <fct>    \n1 treatment yes      \n2 treatment yes      \n3 treatment yes      \n4 treatment yes      \n5 treatment yes      \n6 treatment yes      \n```\n:::\n\n```{.r .cell-code}\nwith(migraine,table(pain_free,group))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         group\npain_free control treatment\n      no       44        33\n      yes       2        10\n```\n:::\n:::\n\n\nWe could have done this graphically.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl <- with(migraine,table(pain_free,group))\nmosaicplot(tbl)\n```\n\n::: {.cell-output-display}\n![](week01_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nExamine the mosaic plot and the table to see how the sizes of the rectangles compare to the numbers.\n\nWe could also more precisely reproduce the figure from the textbook by adding row and column sums.\n\n\n::: {.cell}\n\n```{.r .cell-code}\naddmargins(tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         group\npain_free control treatment Sum\n      no       44        33  77\n      yes       2        10  12\n      Sum      46        43  89\n```\n:::\n:::\n\n\nWe could make it prettier by using the pander package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pander)\npander(addmargins(tbl))\n```\n\n::: {.cell-output-display}\n-------------------------------------\n &nbsp;    control   treatment   Sum \n--------- --------- ----------- -----\n **no**      44         33       77  \n\n **yes**      2         10       12  \n\n **Sum**     46         43       89  \n-------------------------------------\n:::\n:::\n\n\n`pander` has a lot of options we could use to make it even prettier, but we'll skip that for now. There are also a lot of other packages similar to `pander` for prettifying R output.\n\nWe could display proportions instead of the raw numbers, but it looks ugly, so we'll then use the `options()` function to make it look better.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprop.table(tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         group\npain_free    control  treatment\n      no  0.49438202 0.37078652\n      yes 0.02247191 0.11235955\n```\n:::\n\n```{.r .cell-code}\noptions(digits=1)\nprop.table(tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         group\npain_free control treatment\n      no     0.49      0.37\n      yes    0.02      0.11\n```\n:::\n:::\n\n\nBear in mind that `digits=1` is a *suggestion* to R and that R will determine the exact number of digits on its own, depending on the value of the variables to be displayed.\n\n",
    "supporting": [
      "week01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}